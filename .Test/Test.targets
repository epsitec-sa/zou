<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Test2" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  
  <!-- Simulates default msbuild variables -->
  <PropertyGroup Condition="'$(SolutionDir)' == ''">
    <SolutionDir>$([System.IO.Directory]::GetParent($(MSBuildProjectDirectory)).FullName)\sal\</SolutionDir>
    <SolutionName>Salaires</SolutionName>
    <SolutionFileName>$(SolutionName).sln</SolutionFileName>
    <SolutionPath>$(SolutionDir)$(SolutionFileName)</SolutionPath>
  
    <Platform>Win32</Platform>
    <Configuration>Debug</Configuration>
    <PlatformToolset>vc140</PlatformToolset>
  </PropertyGroup>

  <PropertyGroup Condition="'$(ProjectDir)' == ''">
    <ProjectDir>$([System.IO.Directory]::GetParent($(MSBuildProjectDirectory)).FullName)\swissdec\Net\Transmitter\Host\</ProjectDir>
    <ProjectName>Swissdec.Transmitter.Host</ProjectName>
    <ProjectFileName>$(ProjectName).csproj</ProjectFileName>
    <ProjectPath>$(ProjectDir)$(ProjectFileName)</ProjectPath>
  </PropertyGroup>
  
  <!--<PropertyGroup Condition="'$(ProjectDir)' == ''">
    <ProjectDir>$([System.IO.Directory]::GetParent($(MSBuildProjectDirectory)).FullName)\libsalaires\</ProjectDir>
    <ProjectName>SalairesPlus</ProjectName>
    <ProjectFileName>$(ProjectName).vcxproj</ProjectFileName>
    <ProjectPath>$(ProjectDir)$(ProjectFileName)</ProjectPath>

    <Platform>Win32</Platform>
    <Configuration>Debug</Configuration>
    <PlatformToolset>vc140</PlatformToolset>

    <OutDir>bin\$(Configuration)</OutDir>
    <OutputPath>$(OutDir)</OutputPath>
  </PropertyGroup>-->

  <!--<PropertyGroup Condition="'$(ProjectDir)' == ''">
    <ProjectDir>$([System.IO.Directory]::GetParent($(MSBuildProjectDirectory)).FullName)\Bcx\</ProjectDir>
    <ProjectName>Bcx</ProjectName>
    <ProjectFileName>$(ProjectName).csproj</ProjectFileName>
    <ProjectPath>$(ProjectDir)$(ProjectFileName)</ProjectPath>

    <Configuration>Debug</Configuration>
    <OutDir>bin\$(Configuration)</OutDir>
    <OutputPath>$(OutDir)</OutputPath>
  </PropertyGroup>-->

  <!-- Global targets -->
  <Import Project="..\Cpp.Import.props"/>

  <ImportGroup Label="PropertySheets">
    <Import Project="$(ZouDir)Cpp.Standard.props"/>
  </ImportGroup>

  <PropertyGroup>
    <SvnBuildDir>S:\Build\</SvnBuildDir>
    <SvnEpsitecDir>S:\Epsitec\</SvnEpsitecDir>
  </PropertyGroup>

  <ItemGroup>
    <ImportProjects Include="$(BundleDir)partout\SecureForms.Redist.sln">
      <ImportDir>$(OutDir)partout\</ImportDir>
      <ImportPlatform>Any CPU</ImportPlatform>
    </ImportProjects>
    <ImportProjects Include="$(BundleDir)swissdec\Net\Swissdec.Redist.sln">
      <ImportDir>$(OutDir)swissdec\</ImportDir>
      <ImportPlatform>Any CPU</ImportPlatform>
    </ImportProjects>
  </ItemGroup>

  <ItemGroup>
    <ImportFiles Include="$(ZouDir)sal\images\*.png">
      <ImportDir>$(OutDir)images\</ImportDir>
    </ImportFiles>
    <ImportFiles Include="$(SvnEpsitecDir)\solutions\Modeles\Salaires 12.5\modele12.5-officiel.salx">
      <ImportDir>$(OutDir)</ImportDir>
      <ImportFile>Modele12%(Extension)</ImportFile>
    </ImportFiles>
  </ItemGroup>
  
  <Import Project="$(ZouDir)Cpp.Import.targets" />

  <Target Name="Test1">
    <Message Text='"$(MSBuildToolsPath)\msbuild" /nologo /v:m /t:Build "/p:OutDir=%(ImportDir);Platform=%(ImportPlatform);Configuration=%(ImportConfiguration)" "%(ImportProjects.Identity)"' />
  </Target>
  <Target Name="Test2" DependsOnTargets="ImportProjects">
    <Message Text="%(ImportFiles.Identity) =&gt; %(ImportDir)%(ImportFile)" />
  </Target>
  
  <Target Name="ImportFiles" DependsOnTargets="ImportProjects">
    <Message Text="%(ImportFiles.Identity) =&gt; %(ImportDir)%(ImportFile)" />
  </Target>
</Project>