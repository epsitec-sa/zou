<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="TC1" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <X Include="1;2" />
  </ItemGroup>
  
  <!--========================================================================-->
  <!-- PropertyGroup -->
  
  <PropertyGroup>
    <A>0</A>
  </PropertyGroup>

  <Target Name="T1" Outputs="%(X.Identity)">
    <Message Importance="high" Text="[1] A = '$(A)'" />
    <PropertyGroup>
      <A>%(X.Identity)</A>
    </PropertyGroup>
    <Message Importance="high" Text="[2] A = '$(A)'" />
  </Target>

  <!--========================================================================-->
  <!-- ItemGroup -->

  <ItemGroup>
    <B Include="B">
      <V>0</V>
    </B>
  </ItemGroup>

  <Target Name="T2" Outputs="%(X.Identity)">
    <Message Importance="high" Text="[1] B.V = '%(B.V)'" />
    <ItemGroup>
      <B>
        <V>%(X.Identity)</V>
      </B>
    </ItemGroup>
    <Message Importance="high" Text="[2] B.V = '%(B.V)'" />
  </Target>

  <!--========================================================================-->
  <!-- ItemGroup Concat -->

  <Target Name="TC0">
    <ItemGroup>
      <C Include="0" />
    </ItemGroup>
  </Target>

  <Target Name="TC1" DependsOnTargets="TC0" Outputs="%(X.Identity)">
    <Message Importance="high" Text="[1] C = '@(C)'" />
    <ItemGroup>
      <C Include="%(X.Identity)" />
    </ItemGroup>
    <Message Importance="high" Text="[2] C = '@(C)'" />
  </Target>
</Project>