<?xml version="1.0" encoding="utf-8"?>
<!--
The ImportFiles.targets can be used to import files in the parent project.
Input parameters:
- @(ImportFiles)
  - %(ImportDir)
  - %(ImportFile)
-->
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Define imported files default metadata -->
  <ItemDefinitionGroup>
    <ImportFiles>
      <ImportDir>$(OutDir)</ImportDir>
      <ImportFile>%(FileName)%(Extension)</ImportFile>
    </ImportFiles>
  </ItemDefinitionGroup>
  
  <!-- ================ ImportFilesClean ================ -->

  <!-- Target batching -->
  <Target Name="ImportFilesClean" BeforeTargets="Clean" Outputs="%(ImportFiles.ImportDir)%(RecursiveDir)%(ImportFile)">
    <Delete  Files="%(ImportFiles.ImportDir)%(RecursiveDir)%(ImportFile)" />
    <Message Importance="high" Text="  [-] %(ImportFiles.ImportDir)%(RecursiveDir)%(ImportFile)" Condition="'%(ImportFile)' != ''"/>
  </Target>
  
  <!-- ================ ImportFiles ================ -->

  <!-- Target batching -->
  <Target Name="ImportFiles"
          DependsOnTargets="_DeleteLastBuildState"
          BeforeTargets="Build"
          Inputs="@(ImportFiles)"
          Outputs="%(ImportFiles.ImportDir)%(RecursiveDir)%(ImportFile)">
    <Copy SourceFiles="@(ImportFiles)" DestinationFiles="%(ImportDir)%(RecursiveDir)%(ImportFile)"  />
    <Message Importance="high" Text="  [+] %(ImportFiles.Identity) =&gt; %(ImportDir)%(RecursiveDir)%(ImportFile)" />
  </Target>
</Project>