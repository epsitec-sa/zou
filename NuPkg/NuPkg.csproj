<Project>
  
  <PropertyGroup>
    <CoreTargetFramework Condition="'$(CoreTargetFramework)' == ''">net10.0</CoreTargetFramework>
    <CpmId Condition="'$(CpmId)' == ''">Floating</CpmId>
  </PropertyGroup>
  <Import Project="Sdk.props" Sdk="Microsoft.NET.Sdk" />

  <PropertyGroup>
    <OutputType>Library</OutputType>
    <IsPackable>false</IsPackable>
    <ManagePackageVersionsCentrally>false</ManagePackageVersionsCentrally>
    <!-- warning NU1701: Package ... was restored using '.NETFramework,Version=... -->
    <!-- warning SA0001: XML comment analysis is disabled due to project configuration (https://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/documentation/SA0001.md) -->
    <!-- warning MSTEST0001: Explicitly enable or disable tests parallelization (https://learn.microsoft.com/dotnet/core/testing/mstest-analyzers/mstest0001)-->
    <NoWarn>$(NoWarn);NU1701;SA0001;MSTEST0001</NoWarn>
    <!-- Disable following warnings for .net 6.0 -->
    <!-- warning NU1903: Package 'Microsoft.Build.Tasks.Core' 17.3.2 has a known high severity vulnerability -->
    <!-- warning MSB3277: Found conflicts between different versions of ... that could not be resolved-->
    <NoWarn Condition="'$(CpmVer)' == '6'">$(NoWarn);NU1903;MSB3277</NoWarn>
    <SuppressTfmSupportBuildErrors Condition="'$(CpmVer)' == '6'">true</SuppressTfmSupportBuildErrors>
    <!--<TraceNuPkg>true</TraceNuPkg>-->
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="@(PackageVersion)" />
  </ItemGroup>
    
  <ItemGroup>
    <PackageReference Update="Microsoft.Build"                ExcludeAssets="runtime" />
    <PackageReference Update="Microsoft.Build.Locator"        ExcludeAssets="runtime" />
    <PackageReference Update="Microsoft.Build.Tasks.Core"     ExcludeAssets="runtime" />
    <PackageReference Update="Microsoft.Build.Utilities.Core" ExcludeAssets="runtime" />
  </ItemGroup>

  <Target Name="TraceNuPkg" BeforeTargets="CollectPackageReferences" Condition="'$(TraceNuPkg)' != ''">
    <Message Importance="high" Text="$(T0)$(MSBuildProjectFile)$(NC)" />
    
    <Message Importance="high" Condition="'$(SuppressTfmSupportBuildErrors)' != ''" Text="SuppressTfmSupportBuildErrors = $(SuppressTfmSupportBuildErrors)" />
    <Message Importance="high" Condition="'$(SuppressTfmSupportBuildErrors)' != ''" Text=" " />
    
    <Message Importance="high" Text="CoreTargetFramework = $(CoreTargetFramework)" />
    <Message Importance="high" Text="TargetFramework     = $(TargetFramework)" />
    <Message Importance="high" Text=" " />
    
    <Message Importance="high" Text="CpmTFM  = $(CpmTFM)" />
    <Message Importance="high" Text="CpmVer  = $(CpmVer)" />
    <Message Importance="high" Text="CpmId   = $(CpmId)" />
    <Message Importance="high" Text="CpmPath = $(CpmPath)" />
    <Message Importance="high" Text=" " />

    <Message Importance="high" Text="IsTargetFrameworkCompatible(net48,   TFM=$(TargetFramework)) = $([MSBuild]::IsTargetFrameworkCompatible('net48', '$(TargetFramework)'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(netS,    TFM=$(TargetFramework)) = $([MSBuild]::IsTargetFrameworkCompatible('netstandard2.0', '$(TargetFramework)'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(net6.0,  TFM=$(TargetFramework)) = $([MSBuild]::IsTargetFrameworkCompatible('net6.0',  '$(TargetFramework)'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(net8.0,  TFM=$(TargetFramework)) = $([MSBuild]::IsTargetFrameworkCompatible('net8.0',  '$(TargetFramework)'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(net9.0,  TFM=$(TargetFramework)) = $([MSBuild]::IsTargetFrameworkCompatible('net9.0',  '$(TargetFramework)'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(net10.0, TFM=$(TargetFramework)) = $([MSBuild]::IsTargetFrameworkCompatible('net10.0', '$(TargetFramework)'))" />
    <Message Importance="high" Text=" " />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(TFM=$(TargetFramework), net48)   = $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net48'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(TFM=$(TargetFramework), netS)    = $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'netstandard2.0'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(TFM=$(TargetFramework), net6.0)  = $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net6.0'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(TFM=$(TargetFramework), net8.0)  = $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net8.0'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(TFM=$(TargetFramework), net9.0)  = $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net9.0'))" />
    <Message Importance="high" Text="IsTargetFrameworkCompatible(TFM=$(TargetFramework), net10.0) = $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net10.0'))" />
    <Message Importance="high" Text=" " />

    <!--<Message Importance="high" Text="%(PackageReference.Identity) %(Version)" />-->
    <!--<LogItems Items="@(PackageReference)" AllMetadata="false" />
    <Message Importance="high" Text=" " />-->
    <Message Importance="high" Text=" " />
  </Target>

  <Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk" />
</Project>
