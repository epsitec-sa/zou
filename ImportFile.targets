<?xml version="1.0" encoding="utf-8"?>
<!--
The ImportFile.targets can be used to import files in the parent project.
Input parameters:
- @(ImportFile)
  - %(ImportDir)
  - %(ImportFile)
-->
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Define imported files default metadata -->
  <ItemDefinitionGroup>
    <ImportFile>
      <ImportDir>$(OutDir)</ImportDir>
      <ImportFile>%(FileName)%(Extension)</ImportFile>
    </ImportFile>
  </ItemDefinitionGroup>
  
  <!-- ================ ImportFileClean ================ -->

  <!-- Target batching -->
  <Target Name="ImportFileClean"
          Outputs="%(ImportFile.ImportDir)%(RecursiveDir)%(ImportFile)">
    
    <Delete  Files="%(ImportFile.ImportDir)%(RecursiveDir)%(ImportFile)" />
    <Message Importance="high" Text="  [-] %(ImportFile.ImportDir)%(RecursiveDir)%(ImportFile)" Condition="'%(ImportFile)' != ''"/>
  </Target>
  
  <!-- ================ ImportFile ================ -->

  <!-- Target batching -->
  <Target Name="ImportFile"
          DependsOnTargets="_DeleteLastBuildState"
          Inputs="@(ImportFile)"
          Outputs="%(ImportFile.ImportDir)%(RecursiveDir)%(ImportFile)">
    
    <Copy SourceFiles="@(ImportFile)" DestinationFiles="%(ImportDir)%(RecursiveDir)%(ImportFile)"  />
    <Message Importance="high" Text="  [+] %(ImportFile.Identity) =&gt; %(ImportDir)%(RecursiveDir)%(ImportFile)" />
  </Target>
</Project>