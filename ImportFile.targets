<?xml version="1.0" encoding="utf-8"?>
<!--
The ImportFile.targets can be used to import files in the parent project.
Input parameters:
- @(ImportFile)
  - %(ImportDir)
  - %(ImportFile)
-->
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!-- Define imported files default metadata -->
  <ItemDefinitionGroup>
    <ImportFile>
      <ImportDir>$(OutDir)</ImportDir>
      <ImportFile>%(FileName)%(Extension)</ImportFile>
    </ImportFile>
  </ItemDefinitionGroup>
  
  <!-- Create custom builds so that Visual Studio FastUpToDateCheck does not skip changes -->

  <ItemGroup>
    <CustomBuild Include="@(ImportFile)">
      <Outputs Condition="'%(ImportPaths)' == ''">%(ImportDir)%(RecursiveDir)%(ImportFile)</Outputs>
      <Message Condition="'%(ImportPaths)' == ''">[+] %(FullPath) =^&gt; %(ImportDir)%(RecursiveDir)%(ImportFile)</Message>
      <Command Condition="'%(ImportPaths)' == '' And  $([MSBuild]::IsOsPlatform('Windows'))">copy "%(FullPath)" "%(ImportDir)%(RecursiveDir)%(ImportFile)" &gt;$(Nul)</Command>
      <Command Condition="'%(ImportPaths)' == '' And !$([MSBuild]::IsOsPlatform('Windows'))">cp '%(FullPath)' '%(ImportDir)%(RecursiveDir)%(ImportFile)' &gt;$(Nul)</Command>

      <Outputs Condition="'%(ImportPaths)' != ''">%(ImportPaths)</Outputs>
      <Message Condition="'%(ImportPaths)' != ''">[+] %(FullPath) =^&gt; %(ImportPaths)</Message>
      <Command Condition="'%(ImportPaths)' != '' And  $([MSBuild]::IsOsPlatform('Windows'))">for %%i in (%(ImportPaths)) do copy "%(FullPath)" "%%i" &gt;nul</Command>
      <Command Condition="'%(ImportPaths)' != '' And !$([MSBuild]::IsOsPlatform('Windows'))">IFS=';'; for i in '%(ImportPaths)'; do cp '%(FullPath)' "$i" &gt;nul; done</Command>
      <TreatOutputAsContent>true</TreatOutputAsContent>
    </CustomBuild>
  </ItemGroup>
</Project>