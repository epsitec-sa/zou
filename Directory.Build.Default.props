<!-- Defines the default metadata for .NET projects (prolog) -->
<Project>
  <Import Project="zou.props"             Condition="'$(ZouImported)' == ''" />
  <Import Project="TargetFramework.props" Condition="'$(CoreTargetFramework)' == ''" />

  <!-- Default properties (can be overloaded in bundle after importing this script) -->
  <PropertyGroup>
    <Company>Epsitec</Company>
  </PropertyGroup>

  <!-- Debug info-->
  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <DebugType>full</DebugType>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <DebugType>pdbonly</DebugType>
  </PropertyGroup>
  
  <!-- MSBuild -->
  <PropertyGroup>
    <!--<MSBuildWarningsAsMessages>MSB3277</MSBuildWarningsAsMessages>-->
  </PropertyGroup>

  <!-- Compiler -->
  <PropertyGroup>
    <LangVersion>latest</LangVersion>
    <Deterministic>true</Deterministic>
    <SuppressNETCoreSdkPreviewMessage>true</SuppressNETCoreSdkPreviewMessage>
    <!-- .NET Analyzers -->
    <EnableNETAnalyzers>false</EnableNETAnalyzers>
    <AnalysisMode>AllEnabledByDefault</AnalysisMode>
    <!-- Prevent missing await on async methods -->
    <WarningsAsErrors>CS4014;$(WarningsAsErrors)</WarningsAsErrors>
    
    <!-- Avoid warning NETSDK1138: The target framework 'netcoreapp3.1' is out of support -->
    <CheckEolTargetFramework>false</CheckEolTargetFramework>
  </PropertyGroup>

  <!-- Versioning -->
  <!-- https://andrewlock.net/version-vs-versionsuffix-vs-packageversion-what-do-they-all-mean -->
  <!-- https://stackoverflow.com/questions/42183300/what-is-the-difference-between-various-msbuild-version-properties-such-as-versi -->
  <!-- For backward compatibility -->
  <PropertyGroup Condition ="'$(AssemblyVersion)' != ''">
    <VersionPrefix>$(AssemblyVersion)</VersionPrefix>
  </PropertyGroup>
  
  <Target Name="TraceVersion" AfterTargets="GetAssemblyAttributes" Condition="'$(ZouTrace)' == 'true' Or '$(TraceVersion)' == 'true'">
    <Message Importance="high" Text="zou/Directory.Build.Default.props [$(MSBuildProjectFile)]" />
    <Message Importance="high" Text="---------------------------------" />
    <Message Importance="high" Text="RazorLangVersion       = $(RazorLangVersion)" />
    <Message Importance="high" Text="VersionPrefix          = $(VersionPrefix)" />
    <Message Importance="high" Text="VersionSuffix          = $(VersionSuffix)" />
    <Message Importance="high" Text="Version                = $(Version)" />
    <Message Importance="high" Text="AssemblyVersion        = $(AssemblyVersion)" />
    <Message Importance="high" Text="FileVersion            = $(FileVersion)" />
    <Message Importance="high" Text="InformationalVersion   = $(InformationalVersion)" />
    <Message Importance="high" Text="PackageVersion         = $(PackageVersion)" />
    <Message Importance="high" Text=" " />
  </Target>

</Project>
