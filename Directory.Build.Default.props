<!-- Defines the default metadata for .NET projects (prolog) -->
<Project>
  <Import Project="zou.props" Condition="'$(ZouVersion)' == ''" />

  <!-- Default properties (can be overloaded in bundle after importing this script) -->
  <PropertyGroup>
    <FullTargetFramework    Condition="'$(FullTargetFramework)'    == ''">net48</FullTargetFramework>
    <CoreTargetFramework    Condition="'$(CoreTargetFramework)'    == ''">net5</CoreTargetFramework>
    <WindowsTargetFramework Condition="'$(WindowsTargetFramework)' == ''">$(CoreTargetFramework)-windows</WindowsTargetFramework>
    <TargetFramework Condition="'$(TargetFramework)' == '' And '$(RuntimeType)' == 'Core'">$(CoreTargetFramework)</TargetFramework>
    <TargetFramework Condition="'$(TargetFramework)' == '' And '$(RuntimeType)' == 'Full'">$(FullTargetFramework)</TargetFramework>
    <TargetFramework Condition="'$(TargetFramework)' == ''">$(CoreTargetFramework)</TargetFramework>
    <RuntimeIdentifiers>win7-x86;win-x86;win-x64;osx-x64;linux-x64</RuntimeIdentifiers>
    <RazorLangVersion>3.0</RazorLangVersion>
    <Company>Epsitec</Company>
  </PropertyGroup>
  
  <PropertyGroup>
    <TargetFrameworks>*Undefined*</TargetFrameworks>
  </PropertyGroup>

  <!-- Debug info-->
  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <DebugType>full</DebugType>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <DebugType>pdbonly</DebugType>
  </PropertyGroup>
  
  <!-- MSBuild -->
  <PropertyGroup>
    <!--<MSBuildWarningsAsMessages>MSB3277</MSBuildWarningsAsMessages>-->
  </PropertyGroup>

  <!-- Compiler -->
  <PropertyGroup>
    <LangVersion>latest</LangVersion>
    <Deterministic>true</Deterministic>
    <SuppressNETCoreSdkPreviewMessage>true</SuppressNETCoreSdkPreviewMessage>
    <!-- .NET Analyzers -->
    <EnableNETAnalyzers>false</EnableNETAnalyzers>
    <AnalysisMode>AllEnabledByDefault</AnalysisMode>
  </PropertyGroup>

  <!-- Versioning -->
  <!-- https://andrewlock.net/version-vs-versionsuffix-vs-packageversion-what-do-they-all-mean -->
  <!-- https://stackoverflow.com/questions/42183300/what-is-the-difference-between-various-msbuild-version-properties-such-as-versi -->
  <!-- For backward compatibility -->
  <PropertyGroup Condition ="'$(AssemblyVersion)' != ''">
    <VersionPrefix>$(AssemblyVersion)</VersionPrefix>
  </PropertyGroup>
  
  <Target Name="TraceVersion" AfterTargets="GetAssemblyAttributes" Condition="'$(ZouTrace)' == 'true' Or '$(TraceVersion)' == 'true'">
    <Message Importance="high" Text="FullTargetFramework    = $(FullTargetFramework)" />
    <Message Importance="high" Text="CoreTargetFramework    = $(CoreTargetFramework)" />
    <Message Importance="high" Text="WindowsTargetFramework = $(WindowsTargetFramework)" />
    <Message Importance="high" Text="RuntimeIdentifiers     = $(RuntimeIdentifiers)" />
    <Message Importance="high" Text="RazorLangVersion       = $(RazorLangVersion)" />
    <Message Importance="high" Text="VersionPrefix          = $(VersionPrefix)" />
    <Message Importance="high" Text="VersionSuffix          = $(VersionSuffix)" />
    <Message Importance="high" Text="Version                = $(Version)" />
    <Message Importance="high" Text="AssemblyVersion        = $(AssemblyVersion)" />
    <Message Importance="high" Text="FileVersion            = $(FileVersion)" />
    <Message Importance="high" Text="InformationalVersion   = $(InformationalVersion)" />
    <Message Importance="high" Text="PackageVersion         = $(PackageVersion)" />
  </Target>

</Project>
