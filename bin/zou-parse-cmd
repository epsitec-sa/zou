#! /bin/sh

declare -A opts
args=()

while [[ "$#" > 0 ]]; do case "$1" in
  --) shift; args+=("$@"); break;;
  -h|--help) git zou-help $0; exit 0;;
  # add other options like this
  -f|--flag) flag=true; opts[f]=$flag;;
  -o=*|--opt=*) opt=${1#*=}; [ ${opts[o]+_} ] && opts[o]="${opts[o]} $opt" || opts[o]=$opt;;
  -o|--opt) opt=$2; [ ${opts[o]+_} ] && opts[o]="${opts[o]} $opt" || opts[o]=$opt; shift;;
  -*) echo "unknown option: $1" >&2; exit 1;;
  *) args+=("$1");;
esac; shift; done

for k in ${!opts[@]}; do echo "opts[$k] = ${opts[$k]}"; done
echo "args = ${args[@]}"

