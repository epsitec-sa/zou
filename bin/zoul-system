#!/bin/bash

# Use the following statement to include current lib only once
#   [[ -z $ZOUL_SYSTEM ]] && . zoul-system
ZOUL_SYSTEM=true

sys_linux()   { [[ $(uname -s) =~ ^Linux ]]; }
sys_mac()     { [[ $(uname -s) =~ ^Darwin ]]; }
sys_windows() { [[ $(uname -s) =~ ^(MINGW|MSYS|CYGWIN) ]]; }
sys_wsl()     { sys_linux && [[ "$(< /proc/version)" =~ .*-microsoft- ]]; }

zouAbsPathFunc='_readlink'
# sys_mac && zouAbsPathFunc='_abspath'

abspath()   { "$zouAbsPathFunc" "$@"; }
_readlink() { readlink -f "$@"; }
_abspath()
{
  pushd . >/dev/null;
  if [ -d "$1" ]; then
    cd "$1";
    dirs -l +0;
  else
    cd "`dirname \"$1\"`";
    cur_dir=`dirs -l +0`;
    if [ "$cur_dir" == "/" ]; then
      echo "$cur_dir`basename \"$1\"`";
    else
      echo "$cur_dir/`basename \"$1\"`";
    fi;
  fi;
  popd >/dev/null;
}
