#!/bin/bash

. zoul-git-tag

args=()
while [[ "$#" > 0 ]]; do case "$1" in
  -h|--help) zou-help $0; exit 0;;
  --debug) debug=true;;
  -m|--message) message=$2; shift;;
  -*) io_error "unknown option: $1"; exit 1;;
  *) args+=("$1");;
esac; shift; done

tag="${args[0]}"
commit="${args[1]:-HEAD}"
[[ -z $message ]] && message=$(git log -1 --pretty=%B "$commit")

tag_new "$tag" "$commit" "$message" 