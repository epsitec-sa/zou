#!/bin/bash

. zoul-version

versionProps=()
assemblyInfo=()
csProj=()
action='add'
while [[ "$#" > 0 ]]; do case "$1" in
  --) shift; args+=("$@"); break;;
  -h|--help) zou-help $0; exit 0;;
  --version-props) versionProps+=("$2"); shift;;
  --assembly-info) assemblyInfo+=("$2"); shift;;
  --csproj) csProj+=("$2"); shift;;
  --remove) action='remove';;
  -*) echo "unknown option: $1" >&2; exit 1;;
esac; shift; done

set -f
if [ ${#versionProps[@]} -ne 0 ]; then
  version_${action}_version_props "${versionProps[@]}"
fi
if [ ${#assemblyInfo[@]} -ne 0 ]; then
  version_${action}_assembly_info "${assemblyInfo[@]}"
fi
if [ ${#csProj[@]} -ne 0 ]; then
  version_${action}_csproj "${csProj[@]}"
fi
set +f