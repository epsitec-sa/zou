#!/bin/bash

cosm_parse()
{
  while [[ "$#" > 0 ]]; do case "$1" in
    --) shift; args+=("$@"); break;;
    -h|--help) zou-help $0; exit 0;;
    -f|--force) commitDirtySubmodules=true;;
    -*) forOpts+=($1);;
  esac; shift; done
}

cosm_run()
{
  local forOpts=() commitDirtySubmodules
  cosm_parse "$@" || return $?

  local commitSubmodules=true

  . git-for --bottom-up --ancestors --scope cosm_scope "${forOpts[@]}" -- 'cosm_process_unstaged_submodules'
}

cosm_run "$@"