<!-- Creates a stub that launch the main assembly dll with the dotnet utility. -->
<!-- Import this script at the end of a .NET Core project to enable stub creation. -->
<Project>

  <Target Name="_CreateDotnetStubInTargetDir" AfterTargets="Build">
    <WriteLinesToFile
      Condition="!Exists('$(TargetDir)$(TargetName).exe')"
      File="$(TargetDir)$(TargetName).bat"
      Lines="@pushd %~dp0;@dotnet $(TargetName).dll %*;@popd" Overwrite="true" />
  </Target>
  <Target Name="_CreateDotnetStubInPublishDir" AfterTargets="Publish">
    <WriteLinesToFile
      Condition="!Exists('$(PublishDir)$(TargetName).exe')"
      File="$(PublishDir)$(TargetName).bat"
      Lines="@pushd %~dp0;@dotnet $(TargetName).dll %*;@popd" Overwrite="true" />
  </Target>

</Project>