<!-- Defines the default metadata for VS2017 .NET projects (epilog) -->
<Project>
  <PropertyGroup>
    <!-- Package default properties -->
    <FirstCopyrightYear Condition="'$(FirstCopyrightYear)' == ''"></FirstCopyrightYear>
    <LastCopyrightYear Condition="'$(LastCopyrightYear)' == ''">$([System.DateTime]::Now.ToString(yyyy))</LastCopyrightYear>
    <CopyrightYears Condition="'$(CopyrightYears)' == '' And ('$(FirstCopyrightYear)' == '' Or '$(FirstCopyrightYear)' == '$(LastCopyrightYear)')">$(LastCopyrightYear)</CopyrightYears>
    <CopyrightYears Condition="'$(CopyrightYears)' == ''">$(FirstCopyrightYear)-$(LastCopyrightYear)</CopyrightYears>
    <Copyright Condition="'$(Copyright)' == ''">Copyright Â© $(CopyrightYears), EPSITEC SA, CH-1400 Yverdon-les-Bains, Switzerland</Copyright>
    <Authors Condition="'$(Authors)' == ''">$(Company)</Authors>
    <Product Condition="'$(Product)' == ''">$(AssemblyName)</Product>
    <Product>$(Product) ($(TargetFramework))</Product>
    <Description Condition="'$(Description)' == ''">$(Product)</Description>
    <DefaultLanguage Condition="'$(DefaultLanguage)' == ''">en-US</DefaultLanguage>
    <PackageId Condition="'$(PackageId)' == ''">$(ProjectName)</PackageId>
    <PackageId Condition="!$(PackageId.StartsWith('$(Company)'))">$(Company).$(PackageId)</PackageId>
    <DefaultPackageTags>$(PackageId.Replace('.', ';'))</DefaultPackageTags>
    <PackageTags Condition="'$(PackageTags)' != ''">$(DefaultPackageTags);$(PackageTags)</PackageTags>
    <PackageTags Condition="'$(PackageTags)' == ''">$(DefaultPackageTags)</PackageTags>
    <PackageTags >$(PackageTags.ToLower())</PackageTags>
    <RepositoryType Condition="'$(RepositoryType)' == ''">git</RepositoryType>
    <RepositoryUrl Condition="'$(RepositoryUrl)' == '' And '$(PackageProjectUrl)' != ''">$(PackageProjectUrl).$(RepositoryType)</RepositoryUrl>

    <!-- Remove following C# warning because we use a subset of the semantic versioning format   - major.minor.patch -->
    <!-- warning CS7035: The specified version string does not conform to the recommended format - major.minor.build.revision -->
    <NoWarn>$(NoWarn);7035</NoWarn>
  </PropertyGroup>
  
  <!-- Exclude git metadata from project -->
  <ItemGroup>
    <None Remove=".git*" />
  </ItemGroup>

  <!-- Make assembly internals visible to test projects (MyProject visible to MyProject.Test[s]) -->
  <!-- Does not support signed assemblies -->
  <Target Name="AddInternalsVisibleToAttribute" BeforeTargets="GetAssemblyAttributes" Condition="!$(SignAssembly)">
    <ItemGroup>
      <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
        <_Parameter1>$(MSBuildProjectName).Test</_Parameter1>
      </AssemblyAttribute>
      <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
        <_Parameter1>$(MSBuildProjectName).Tests</_Parameter1>
      </AssemblyAttribute>
    </ItemGroup>
  </Target>
</Project>
