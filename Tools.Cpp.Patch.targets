<Project InitialTargets="ZouFixKitsRoot10">
  
  <Target Name="ZouFixKitsRoot10" Condition="$([MSBuild]::IsOsPlatform(Windows)) And $([System.Environment]::Is64BitOperatingSystem)">
    <PropertyGroup>
      <KitsRoot10>$([MSBuild]::GetRegistryValue('HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Kits\Installed Roots', 'KitsRoot10'))</KitsRoot10>
      <KitsRoot10IsX86>$(KitsRoot10.Contains('(x86)'))</KitsRoot10IsX86>
    </PropertyGroup>
    <Message Condition="! $(KitsRoot10IsX86)" Importance="high" Text="Patching registry (HKLM\SOFTWARE\Microsoft\Windows Kits\Installed Roots\KitsRoot10)..." />
    <Exec Command="regedit /s $(ZouDir)Tools.Cpp.KitsRoot10.reg"
          Condition="! $(KitsRoot10IsX86)"
          ContinueOnError="true"
          EchoOFF="true" />
  </Target>
  
</Project>
